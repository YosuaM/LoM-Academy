---
import StandarLayout from "@Layouts/StandarLayout.astro";
import { mountLevels } from "@Content/game_data_en/Mounts.astro";

let levels = mountLevels.flatMap((mountLevel) => {
  return mountLevel.stars.map((star, index) => {
    return {
      tier: mountLevel.tier,
      star: index + 1,
    };
  });
});
---

<StandarLayout title="Mount Upgrading Calculator" page={6}>
  <!-- HEADER -->
  <div class="page-heading py-2 md:py-4">
    <div class="container">
      <div class="mb-2 flex items-baseline gap-x-3 lg:gap-x-4.5">
        <svg
          role="img"
          class="aspect-[6/9] w-3 fill-accent sm:w-4 md:w-5 lg:w-7 xl:w-9"
        >
          <use xlink:href="/assets/img/str1/sprite.svg#arrow-right-pixel"></use>
        </svg>
        <h1
          class="relative mb-3 text-3xl font-bold leading-none tracking-tighter text-gray-900 dark:text-white sm:text-4xl md:text-5xl lg:text-7xl xl:text-[84px]"
        >
          Mount Upgrading Calculator
        </h1>
      </div>

      <ol
        class="relative flex flex-wrap gap-x-6 text-sm leading-none text-gray-500 lg:gap-x-8 lg:text-lg [&>li>a]:text-gray-900 hover:[&>li>a]:text-accent dark:[&>li>a]:text-white dark:hover:[&>li>a]:text-accent [&>li]:relative"
      >
        <li class="font-bold">
          <!-- SECTION -->
          <a href="/en/tools" }> Tools </a>
          <!-- SECTION -->
          <!-- TITLE -->
          <svg
            role="img"
            class="fill-gray absolute -right-4 top-1/2 aspect-[3/5] w-1.5 -translate-y-1/2 lg:-right-5"
          >
            <use xlink:href="/assets/img/str1/sprite.svg#arrow-right-pixel-alt"
            ></use>
          </svg>
        </li>
        <li>Mount Upgrading Calculator</li>
        <!-- TITLE -->
      </ol>
    </div>
  </div>
  <!-- HEADER -->

  <main id="main-content" class="grow lg:pt-0">
    <div class="pt-10 pb-16 lg:pt-20 lg:pb-44">
      <div class="container">
        <div class="grid grid-cols-2 gap-7.5 mb-9 lg:mb-14 xl:pr-12.5">
          <!-- CURRENT LEVEL -->
          <div>
            <label
              class="block text-sm font-bold uppercase text-gray-500 [&:not(:empty)]:mb-2.5"
              for="mount-current-level"
              >Current level
              <span class="text-accent">*</span>
            </label>
            <select
              class="w-full border-base bg-white/40 px-4 h-12.5 font-medium text-gray-900 transition-all duration-150 bg-caret bg-[length:10px_6px] bg-[position:right_18px_center] focus:border-accent focus:outline-0 focus:ring-0 focus:text-gray-900 hover:cursor-pointer dark:border-gray-650 dark:bg-gray-900/40 dark:text-white dark:placeholder:text-gray-500/80 dark:focus:border-accent dark:focus:text-white dark:bg-caret-white dark:focus:bg-gray-900"
              name="mount-current-level"
              id="mount-current-level"
            >
              {
                levels.map((level, index) => (
                  <option
                    value={index}
                  >{`Tier ${level.tier} - ${level.star} Star`}</option>
                ))
              }
            </select>
          </div>
          <!-- CURRENT LEVEL -->

          <!-- TARGET LEVEL -->
          <div>
            <label
              class="block text-sm font-bold uppercase text-gray-500 [&:not(:empty)]:mb-2.5"
              for="mount-target-level"
              >Target level
              <span class="text-accent">*</span>
            </label>
            <select
              class="w-full border-base bg-white/40 px-4 h-12.5 font-medium text-gray-900 transition-all duration-150 bg-caret bg-[length:10px_6px] bg-[position:right_18px_center] focus:border-accent focus:outline-0 focus:ring-0 focus:text-gray-900 hover:cursor-pointer dark:border-gray-650 dark:bg-gray-900/40 dark:text-white dark:placeholder:text-gray-500/80 dark:focus:border-accent dark:focus:text-white dark:bg-caret-white dark:focus:bg-gray-900"
              name="mount-target-level"
              id="mount-target-level"
            >
              {
                levels.map((level, index) => (
                  <option
                    value={index}
                  >{`Tier ${level.tier} - ${level.star} Star`}</option>
                ))
              }
            </select>
          </div>
          <!-- TARGET LEVEL -->

          <!-- CLOCK WINDER INPUT -->
          <div class="">
            <label
              class="block text-sm font-bold uppercase text-gray-500 [&:not(:empty)]:mb-2.5"
              for="mount-clock-winders-owned"
              >Clock Winders owned
            </label>
            <input
              class="group-[.is-success]:bg-input-success-dark group-[.is-error]:border-danger group-[.is-error]:bg-input-invalid group-[.is-error]:text-danger group-[.is-success]:pr-16 group-[.is-invalid]:pr-16 px-4 py-2 border-base bg-white/40 bg-[length:18px_18px,_38px_38px] bg-[position:right_16px_center,_right_6px_center] bg-no-repeat font-medium leading-8 tracking-tight text-gray-900 transition-all duration-150 placeholder:font-normal placeholder:text-gray-500/60 focus:border-accent focus:bg-white focus:text-gray-900 focus:outline-0 focus:ring-0 dark:border-gray-650 dark:group-[.is-success]:bg-input-success dark:bg-gray-900/40 dark:text-white dark:placeholder:text-gray-500/80 dark:focus:border-accent dark:focus:bg-gray-900 w-full"
              type="number"
              name="mount-clock-winders-owned"
              id="mount-clock-winders-owned"
              min="0"
              max="999999999999"
              value=""
              placeholder=""
            />
            <p class="group-[.is-error]:block mt-2 hidden text-xs text-danger">
            </p>
          </div>
          <!-- CLOCK WINDER INPUT -->

          <!-- DIAMOND INPUT -->
          <div class="">
            <label
              class="block text-sm font-bold uppercase text-gray-500 [&:not(:empty)]:mb-2.5"
              for="mount-diamonds-owned"
              >Diamonds owned
            </label>
            <input
              class="group-[.is-success]:bg-input-success-dark group-[.is-error]:border-danger group-[.is-error]:bg-input-invalid group-[.is-error]:text-danger group-[.is-success]:pr-16 group-[.is-invalid]:pr-16 px-4 py-2 border-base bg-white/40 bg-[length:18px_18px,_38px_38px] bg-[position:right_16px_center,_right_6px_center] bg-no-repeat font-medium leading-8 tracking-tight text-gray-900 transition-all duration-150 placeholder:font-normal placeholder:text-gray-500/60 focus:border-accent focus:bg-white focus:text-gray-900 focus:outline-0 focus:ring-0 dark:border-gray-650 dark:group-[.is-success]:bg-input-success dark:bg-gray-900/40 dark:text-white dark:placeholder:text-gray-500/80 dark:focus:border-accent dark:focus:bg-gray-900 w-full"
              type="number"
              name="mount-diamonds-owned"
              id="mount-diamonds-owned"
              min="0"
              max="999999999999"
              value=""
              placeholder=""
            />
            <p class="group-[.is-error]:block mt-2 hidden text-xs text-danger">
            </p>
          </div>
          <!-- DIAMOND INPUT -->

          <!-- BUTTON -->
          <div class="basis-1/2">
            <button
              id="mount-calculator-button"
              class="inline-flex text-center font-bold leading-none transition-colors uppercase justify-center gap-x-3 py-4 px-4 md:py-[18px] lg:px-8 text-sm text-gray-900 bg-accent hover:bg-accent/90 basis-full md:basis-1/2 lg:basis-1/3"
            >
              Calculate cost
            </button>
          </div>
          <!-- BUTTON -->

          <div id="mount-calculator-result" class="basis-1/2">
            <div class="hidden">
              <!-- CLOCK WINDERS -->
              This upgrade costs
              <span id="mount-calculator-result-clock-winders" class="text-accent"
                >0</span
              > Clock Winders.
              <!-- CLOCK WINDERS -->
              <!-- CLOCK WINDERS MISSING -->
              <span class="hidden">
                Missing <span
                  id="mount-calculator-result-clock-winders-missing"
                  class="text-accent">0</span
                > Clock winders</span
              >
              <!-- CLOCK WINDERS MISSING -->
            </div>
            <div class="hidden pt-4">
              <!-- DIAMONDS -->
              Buy these Clock Winders costs
              <span id="mount-calculator-result-diamonds" class="text-accent"
                >0</span
              > Diamonds.
              <!-- DIAMONDS -->
              <!-- DIAMONDS MISSING -->
              <span class="hidden">
                Missing <span
                  id="mount-calculator-result-diamonds-missing"
                  class="text-accent">0</span
                > Diamonds.</span
              >
              <!-- DIAMONDS MISSING -->
            </div>
          </div>

          <!-- ERROR MESSAGE -->
          <div id="mount-calculator-error" class="basis-1/2 hidden">
            Target level must be higher than current level.
          </div>
          <!-- ERROR MESSAGE -->
        </div>
      </div>
    </div>
  </main>
</StandarLayout>
